import{L as C}from"./assets/scroll-up-57c3d5dd.js";import{a as i}from"./assets/vendor-0cb09735.js";i.defaults.baseURL="https://books-backend.p.goit.global/books";const d={getCategoryList:async function(){try{return(await i.get("/category-list")).data}catch(e){console.log(e)}},getBestSellers:async function(){try{return(await i.get("/top-books")).data}catch(e){console.log(e)}},getCategory:async function(e){try{return(await i.get(`/category?category=${e}`)).data}catch(t){console.log(t)}},getBookDescription:async function(e){try{return(await i.get(`/${e}`)).data}catch(t){console.log(t)}}};function w(e,t){const r=document.querySelector(e),o=t.split(" "),a=o[o.length-1];o.pop(),t=o.join(" "),r.insertAdjacentHTML("afterbegin",`<h1 class="page-title">${t} <span class="page-title-highlight">${a}</span></h1>`)}function q({title:e,author:t,book_image:r,_id:o}){return`<li class="book-category-item" data-id="${o}">
    <div class = "img-cover">
      <img class="book-category-image" src="${r}" alt="Book cover" width="335"  /> 
      <p class="overlay-text">quick view</p>
      </div>
        <div class="book-category-text">
      <h3 class = "book-title">
      ${e}</h3>
      <p class = "author-name"> ${t}</p>
    </div>
 </li>`}function k(e){const t=document.querySelector(".bestsellers-container");t.innerHTML="",w(".bestsellers-container","Best Sellers Books"),t.insertAdjacentHTML("beforeend",'<ul class="bestsellers-list"></ul>');const r=document.querySelector(".bestsellers-list"),o=e.map(({books:c,list_name:n})=>`<li class="bestsellers-item">
              <h2 class="bestsellers-category-title">${n}</h2>
              <ul class="bestsellers-books-list"> 
                ${c.map(({title:l,author:g,book_image:s,_id:y})=>q({title:l,author:g,book_image:s,_id:y})).join(`
`)}
              </ul>
              <button class="bestsellers-btn" type="button" data-category="${n}">See more</button>
            </li>`).join(`
`);r.insertAdjacentHTML("beforeend",o),document.querySelector(".bestsellers-list").addEventListener("click",E)}async function B(){try{const e=await d.getBestSellers();return k(e)}catch(e){console.error("Error fetching best sellers:",e)}}B();async function E(e){try{if(e.target.nodeName!=="BUTTON")return;let t=e.target.dataset.category;const r=document.querySelector(".sidebar-category-item");document.querySelectorAll(".sidebar-category-item").forEach(c=>{c.dataset.source===t&&(r.classList.remove("category-active"),c.classList.add("category-active"))});const a=await d.getCategory(t);f(a,t)}catch(t){console.log("Error fetching modal:",t)}}function $(e,t){const r=document.querySelector(e),o=t.split(" "),a=o[o.length-1];o.pop(),t=o.join(" "),r.insertAdjacentHTML("afterbegin",`<h1 class="page-title">${t} <span class="page-title-highlight">${a}</span></h1>`)}function T({title:e,author:t,book_image:r,_id:o}){return`<li class="book-category-item" data-id="${o}">
    <div class = "img-cover">
      <img class="book-category-image" src="${r}" alt="Book cover" width="335"  /> 
      <p class="overlay-text">quick view</p>
      </div>
        <div class="book-category-text">
      <h3 class = "book-title">
      ${e}</h3>
      <p class = "author-name"> ${t}</p>
    </div>
 </li>`}function f(e,t){const r=document.querySelector(".bestsellers-container");r.innerHTML="",$(".bestsellers-container",t),r.insertAdjacentHTML("beforeend",'<ul class = "book-category-list"></ul>');const o=document.querySelector(".book-category-list"),a=e.map(({author:c,book_image:n,title:l,_id:g})=>T({author:c,book_image:n,title:l,_id:g})).join("");o.innerHTML=a,o.addEventListener("click",onClickBook)}const b={categoryContainer:document.querySelector(".sidebar-category-container"),categoryList:document.querySelector(".sidebar-category-list"),allCategory:document.querySelector(".all-category")};function x(e){return e.map(r=>`<li class='sidebar-category-item' data-source="${r.list_name}">${r.list_name}</li>`).join("")}(async()=>{try{const e=await d.getCategoryList(),t=x(e);b.categoryList.insertAdjacentHTML("beforeend",t)}catch(e){console.log(e)}})();b.allCategory.addEventListener("click",async e=>{try{const t=await d.getBestSellers();k(t)}catch(t){console.log(t)}});b.categoryList.addEventListener("click",async e=>{if(e.target.classList.contains("sidebar-category-item")){const t=e.target.dataset.source;document.querySelectorAll(".sidebar-category-item").forEach(o=>{o.classList.remove("category-active")}),e.target.classList.add("category-active");try{if(!e.target.classList.contains("all-category")){const o=await d.getCategory(t);f(o,t)}}catch(o){console.log(o)}}});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("modal"),t=document.querySelector(".modal-close"),r=document.querySelector(".modal-add-to-cart"),o=document.querySelector(".logo-amazon"),a=document.querySelector(".logo-apple"),c=new C;function n(){e.style.display="none",document.body.style.overflow="auto",document.documentElement.style.overflow="auto"}t.addEventListener("click",n),e.addEventListener("click",function(s){s.target===e&&n()}),document.addEventListener("keydown",function(s){s.key==="Escape"&&n()}),o.addEventListener("click",function(s){s.preventDefault(),window.open(this.href,"_blank")}),a.addEventListener("click",function(s){s.preventDefault(),window.open(this.href,"_blank")});function l(s){const y=e.querySelector(".book-cover"),L=e.querySelector(".book-title"),v=e.querySelector(".author"),S=e.querySelector(".description"),h=e.querySelector(".links");y.src=s.coverImageUrl,L.textContent=s.title,v.textContent="Author: "+s.author,S.textContent=s.description,h.innerHTML="",s.links.forEach(function(p){const u=document.createElement("a");u.href=p.url,u.target="_blank";const m=document.createElement("img");m.src=p.logoUrl,m.alt=p.name,u.appendChild(m),h.appendChild(u)}),c.checkProduct(s.id).hasProd?r.textContent="Remove from Shopping List":r.textContent="Add to Shopping List"}l({id:1,coverImageUrl:"https://example.com/book-cover.jpg",title:"Example Book Title",author:"John Doe",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",links:[{logoUrl:"/src/images/pop-up/amazon.svg",url:"https://www.amazon.com"},{logoUrl:"/src/images/pop-up/apple.svg",url:"https://books.apple.com"}]})});
//# sourceMappingURL=commonHelpers2.js.map
